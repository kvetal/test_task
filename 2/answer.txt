FILE *f = fopen(name, "w");
try
{
	//Здесь работаем с файлом
} catch (...)
{
	//Что то пошло не так, обрабатываем исключение,
    //например, закрываем файл и вызодим из приложения
	fclose(f);
	return 1;
}
fclose(f);

